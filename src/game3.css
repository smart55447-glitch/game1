* {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
}

html,
body {
    margin: 0;
    width: 100svw;
    height: 100svh;
    overflow: hidden;
    background: linear-gradient(180deg, #3B2F77 0%, #2F2566 100%);
    /* 보라 UI 유지 */
    color: #fff;
    font-family: system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    display: grid;
    place-items: center;
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* 메인 프레임 */
.stage {
    position: relative;
    width: min(94svw, 620px);
    aspect-ratio: 1 / 1.3;
    border-radius: 14px;
    background: #4A3C7A;
    box-shadow: 0 28px 64px rgba(0, 0, 0, .45);
    overflow: hidden;
}

/* HUD */
.hud {
    position: absolute;
    left: 6%;
    right: 6%;
    top: 10px;
    display: flex;
    justify-content: space-between;
    z-index: 5;
}

.hud .time {
    font-weight: 900;
    font-size: clamp(18px, 6vw, 28px);
    color: #d01818;
    background: #fff;
    border: 2px solid rgba(0, 0, 0, .12);
    border-radius: 12px;
    padding: 8px 12px;
    box-shadow: 0 2px 0 rgba(0, 0, 0, .1);
}

.hud .time.danger {
    animation: blink 0.75s steps(2, end) infinite;
    border-color: rgba(208, 24, 24, .4);
    box-shadow: 0 0 10px rgba(208, 24, 24, .35), inset 0 0 8px rgba(208, 24, 24, .25);
}

@keyframes blink {
    50% {
        opacity: .45;
    }
}

.hud .pct {
    font-weight: 900;
    font-size: clamp(16px, 5vw, 24px);
    color: #FFD275;
    background: rgba(0, 0, 0, .25);
    padding: 6px 10px;
    border-radius: 8px;
}

/* 작업 영역 */
.workspace {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    z-index: 1;
    top: 55px;
    height: calc(100% - 110px);
    user-select: none;
    -webkit-user-select: none;
}

.workspace canvas {
    width: 92%;
    height: auto;
    aspect-ratio: 1/1;
    border-radius: 10px;
    image-rendering: crisp-edges;
    image-rendering: pixelated;
    background: transparent;
    /* ✅ 주변은 보라 배경이 비치도록 */
}

/* 안내 */
.hint {
    position: absolute;
    left: 6%;
    right: 6%;
    bottom: 10px;
    z-index: 5;
    font-size: 12px;
    color: #1b1244;
    background: rgba(255, 248, 230, .96);
    border: 2px solid rgba(0, 0, 0, .15);
    border-radius: 10px;
    padding: 6px 8px;
}

/* 문지를 때 살짝 덜덜 */
@keyframes shake {
    0% {
        transform: translate(0, 0) rotate(0);
    }

    25% {
        transform: translate(1.6px, -1.6px) rotate(-0.7deg);
    }

    50% {
        transform: translate(-1.2px, 1.2px) rotate(0.7deg);
    }

    75% {
        transform: translate(1.2px, 1.2px) rotate(-0.4deg);
    }

    100% {
        transform: translate(0, 0) rotate(0);
    }
}

.workspace.shake {
    animation: shake 0.12s infinite linear;
}

/* 95%~99% 사이 반짝 */
@keyframes shine {
    0% {
        filter: brightness(1);
    }

    50% {
        filter: brightness(2.3);
    }

    100% {
        filter: brightness(1);
    }
}

.workspace.shine {
    animation: shine 0.18s linear infinite;
}